/*
 * js-utils v-0.1.0
 * Source code can be found at Github (georgeosd/js-utils)
 *
 * The MIT License (MIT)
 * Copyright (c) 2014 Takeharu Oshida
 */

if("undefined"!=typeof module&&module.exports)var _=require("underscore"),Promise=require("es6-promise").Promise;!function(a,b,c,d){"use strict";if((!b||!c)&&a.console&&a.console.log)return console.error("Missing dependency, this utility needs underscore.js & es6-promise");var e=a.App||{},f=e.Utils={},g=function(a){setTimeout(a,0)};f.nextTick=g;var h=function(){var a=Array.prototype.slice.apply(arguments),b=a[0],d=a.slice(1);return new c(function(a,c){return b(a,c,d)})};f.defer=h;var i=function(){var a=function(){var a=[];return{next:function(){if(b.isFunction(b.head(a))){var c=b.head(a);a=b.tail(a),c.apply(this,Array.prototype.slice.apply(arguments))}},push:function(b){a.push(b)},debug:function(){return a}}}();return a};f.queueing=i;var j=function(a,b){a._super=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})};f.inherits=j;var k=function(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};f.clone=k;var l=function(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]="object"==typeof a[c]?l(a[c]):a[c]);return b};f.deepClone=l;var m=function(b,c){var d={log:4,debug:3,info:2,warn:1,error:0},e={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}},f=d[c+"".toLowerCase()]||5;return a.console?(f>3&&a.console.log&&a.console.log.bind&&(e.log=function(){return a.console.log.bind(a.console,b)}()),f>2&&a.console.debug&&a.console.debug.bind&&(e.debug=function(){return a.console.debug.bind(a.console,b)}()),f>1&&a.console.info&&a.console.info.bind&&(e.info=function(){return a.console.info.bind(a.console,b)}()),f>0&&a.console.warn&&a.console.warn.bind&&(e.warn=function(){return a.console.warn.bind(a.console,b)}()),a.console.error&&a.console.error.bind&&(e.error=function(){return a.console.error.bind(a.console,b)}()),e):e};f.createLogger=m;var n=m("[UnexpectedError]","error"),o=function(a){return String.fromCharCode.apply(null,new Uint16Array(a))};f.ab2str=o;var p=function(a){for(var b=new ArrayBuffer(2*a.length),c=new Uint16Array(b),d=0,e=a.length;e>d;d++)c[d]=a.charCodeAt(d);return c.buffer};f.str2ab=p;var q=function(){return void 0};f.noop=q;var r=function(a){return Array.prototype.slice.apply(a)};f.slice=r;var s=function(a){return b.isArray(a)?a:[a]};f.toArray=s;var t=function(a){return null!==a&&a!==d};f.existy=t;var u=function(a){return a!==!1&&t(a)};f.truthy=u;var v=function(a){return a===!0};f.isTrue=v;var w=function(a){return a===!1};f.isFalse=w;var x=function(a){return b.isNumber(a)&&0>a};f.isNegativeNum=x;var y=function(a){return 0===a};f.isZero=y;var z=function(a){return 1===a};f.isOne=z;var A=function(a){return b.isNumber(a)&&a>0};f.isPositiveNum=A;var B=function(a,b,c,d,e){var f=s(d);return u(a)?b.apply(e,f):c.apply(e,f)};f.doWhenOrElse=B;var C=function(a,b,c,d){B(a,b,q,c,d)};f.doWhen=C;var D=function(a,b){return t(a)?a:b};f.getOrElse=D;var E=function(a,b,c){return u(c(a))?a:b};f.checkOrElse=E;var F=function(){var a={},c={route:function(c,d){C(b.isFunction(a[c]),a[c],d)},add:function(b,c){a[b]=c}};return c};f.router=F;var G=function(a){var b=[null,null];try{b[1]=JSON.parse(a)}catch(c){n.log("Failed to parse JSON",c.stack),b[0]=c}return b};f.tryParseJSON=G;var H=function(a){return D(G(a)[1],{})};f.parseJsonWithoutError=H;var I=function(){var a=Date.now(),c=0,d="0123456789abcdef0123456789abcdef".split("");return function(e){if(e)return e;var f=Math.ceil(Date.now()/1e3).toString(16);return f===a?(c++,f=f+""+Number(c+"",16)):(a=f,c=0,f=f+""+c),(f+b.shuffle(d).join("")).substr(0,24)}}();f.objectId=I;var J=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return function(){return a()+a()+a()+a()}}();f.uuid=J;var K=function(a){var b=(a+"").substring(0,8);return parseInt(b,16)};f.mongoDBId2Ts=K;var L=function(a){return new Date(1e3*K(a))};f.mongoDBId2Date=L;var M=function(a,b,c){var d=c?c+"":"0";return(a+"").length>=b?a+"":M(d+a,b,d)};f.padLeft=M;var N=function(a){return function(b){return M(b,a,"0")}};f.padLeftNZero=N;var O=N(2),P=function(a){return O(a.getMonth()+1)+"/"+O(a.getDate())+" "+O(a.getHours())+":"+O(a.getMinutes())};f.formatMMDDhhmm=P;var Q=function(a){return a.getFullYear()+"/"+P(a)+":"+O(a.getSeconds())};f.formatYYYYMMDDHHMMSS=Q;var R=function(a){return t(a)?a:""};f.nullGuard=R;var S=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};f.escapeHtml=S,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=e),exports.App=e):a.App=e}(this,_,Promise,void 0);
//# sourceMappingURL=utils.min.map