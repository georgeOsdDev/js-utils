/*
 * js-utils v-0.1.3
 * Source code can be found at Github (georgeosd/js-utils)
 *
 * The MIT License (MIT)
 * Copyright (c) 2014 Takeharu Oshida
 */

!function(a,b,c,d){"use strict";if("undefined"==typeof b||"undefined"==typeof c)if("undefined"!=typeof module&&module.exports)b=require("underscore"),c=require("es6-promise").Promise;else if(a.console&&a.console.log)return console.error("Missing dependency, this utility needs underscore.js & es6-promise");var e=a.Utils,f={},g=function(a){setTimeout(a,0)};f.nextTick=g;var h=function(){var a=Array.prototype.slice.apply(arguments),b=a[0],d=a.slice(1);return new c(function(a,c){return b(a,c,d)})};f.defer=h;var i=function(){var a=Array.prototype.slice.apply(arguments),b=a[0],d=a.slice(1);return new c(function(a,c){return b.apply(null,[a,c].concat(d))})};f.deferApply=i;var j=function(){var a=function(){var a=[];return{next:function(){if(b.isFunction(b.head(a))){var c=b.head(a);a=b.tail(a),c.apply(this,Array.prototype.slice.apply(arguments))}},push:function(b){a.push(b)},debug:function(){return a}}}();return a};f.queueing=j;var k=function(a,b){if("function"==typeof Object.create)a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});else{a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}};f.inherits=k;var l=function(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};f.clone=l;var m=function(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)a.hasOwnProperty(c)&&(b[c]="object"==typeof a[c]?m(a[c]):a[c]);return b};f.deepClone=m,f.previousUtils=m(e);var n=function(b,c){var d={log:4,debug:3,info:2,warn:1,error:0},e={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}},f=d[c+"".toLowerCase()]||5;return a.console?(f>3&&a.console.log&&a.console.log.bind&&(e.log=function(){return a.console.log.bind(a.console,b)}()),f>2&&a.console.debug&&a.console.debug.bind&&(e.debug=function(){return a.console.debug.bind(a.console,b)}()),f>1&&a.console.info&&a.console.info.bind&&(e.info=function(){return a.console.info.bind(a.console,b)}()),f>0&&a.console.warn&&a.console.warn.bind&&(e.warn=function(){return a.console.warn.bind(a.console,b)}()),a.console.error&&a.console.error.bind&&(e.error=function(){return a.console.error.bind(a.console,b)}()),e):e};f.createLogger=n;var o=n("[UnexpectedError]","error"),p=function(a){return String.fromCharCode.apply(null,new Uint16Array(a))};f.ab2str=p;var q=function(a){for(var b=new ArrayBuffer(2*a.length),c=new Uint16Array(b),d=0,e=a.length;e>d;d++)c[d]=a.charCodeAt(d);return c.buffer};f.str2ab=q;var r=function(){return void 0};f.noop=r;var s=function(a){return Array.prototype.slice.apply(a)};f.slice=s;var t=function(a){return b.isArray(a)?a:[a]};f.toArray=t;var u=function(a){return null!==a&&a!==d};f.existy=u;var v=function(a){return a!==!1&&u(a)};f.truthy=v;var w=function(a){return a===!0};f.isTrue=w;var x=function(a){return a===!1};f.isFalse=x;var y=function(a){return b.isNumber(a)&&0>a};f.isNegativeNum=y;var z=function(a){return 0===a};f.isZero=z;var A=function(a){return 1===a};f.isOne=A;var B=function(a){return b.isNumber(a)&&a>0};f.isPositiveNum=B;var C=function(a,b,c,d,e){var f=t(d);return v(a)?b.apply(e,f):c.apply(e,f)};f.doWhenOrElse=C;var D=function(a,b,c,d){C(a,b,r,c,d)};f.doWhen=D;var E=function(a,b){return u(a)?a:b};f.getOrElse=E;var F=function(a,b,c){return v(c(a))?a:b};f.checkOrElse=F;var G=function(){var a={},c={route:function(c,d){D(b.isFunction(a[c]),a[c],d)},add:function(b,c){a[b]=c}};return c};f.router=G;var H=function(a){var b=[null,null];try{b[1]=JSON.parse(a)}catch(c){o.log("Failed to parse JSON",c.stack),b[0]=c}return b};f.tryParseJSON=H;var I=function(a){return E(H(a)[1],{})};f.parseJsonWithoutError=I;var J=function(){var a=Date.now(),c=0,d="0123456789abcdef0123456789abcdef".split("");return function(e){if(e)return e;var f=Math.ceil(Date.now()/1e3).toString(16);return f===a?(c++,f=f+""+Number(c+"",16)):(a=f,c=0,f=f+""+c),(f+b.shuffle(d).join("")).substr(0,24)}}();f.objectId=J;var K=function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return function(){return a()+a()+a()+a()}}();f.uuid=K;var L=function(a){var b=(a+"").substring(0,8);return parseInt(b,16)};f.mongoDBId2Ts=L;var M=function(a){return new Date(1e3*L(a))};f.mongoDBId2Date=M;var N=function(a,b,c){var d=c?c+"":"0";return(a+"").length>=b?a+"":N(d+a,b,d)};f.padLeft=N;var O=function(a){return function(b){return N(b,a,"0")}};f.padLeftNZero=O;var P=O(2),Q=function(a){return P(a.getMonth()+1)+"/"+P(a.getDate())+" "+P(a.getHours())+":"+P(a.getMinutes())};f.formatMMDDhhmm=Q;var R=function(a){return a.getFullYear()+"/"+Q(a)+":"+P(a.getSeconds())};f.formatYYYYMMDDHHMMSS=R;var S=function(a){return u(a)?a:""};f.nullGuard=S;var T=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};f.escapeHtml=T;var U=function(){return a.XMLHttpRequest?function(){var a=new XMLHttpRequest;return a.overrideMimeType&&a.overrideMimeType("text/plain"),a}:a.ActiveXObject?function(){try{return new a.ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}:f.noop}(),V=function(a){var d=new c(function(c,d){var e=U();if(!e)return d();e.onreadystatechange=function(){return 4===e.readyState?200===e.status?c({status:e.status,body:e.responseText}):d({status:e.status}):void 0};var f="GET"===a.method?"GET":"POST",g=a.url,h="application/x-www-form-urlencoded",i=a.data||{};if(e.open(f,g,!0),e.setRequestHeader("Content-Type",h),"POST"===f){var j=b.map(i,function(a,b){return b+"="+a}).join("&");"POST"!==a.method&&(j+="&_method="+a.method),e.send(j)}else e.send()});return d};f.ajax=V,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=f),exports.Utils=f):a.Utils=f}(this,"undefined"==typeof _?void 0:_,"undefined"==typeof Promise?void 0:Promise,void 0);
//# sourceMappingURL=utils.min.map